# Netlify Build and Functions Configuration

[build]
  # Ensure these paths are correct
  functions = "netlify/functions"
  publish = "."
  command = "echo 'Building static site...'"

# Netlify Headers for CORS issues
[[headers]]
  for = "/*"
  [headers.values]
    Access-Control-Allow-Origin = "*"
    Access-Control-Allow-Headers = "Content-Type"
    Access-Control-Allow-Methods = "GET, POST, OPTIONS"

# CRITICAL FIX: Netlify Redirects - Ensures clean URLs work

[[redirects]]
  from = "/profile"
  to = "/profile.html"
  status = 200

[[redirects]]
  from = "/create"
  to = "/create.html"
  status = 200
  
[[redirects]]
  from = "/settings"
  to = "/settings.html"
  status = 200
  
[[redirects]]
  from = "/admin"
  to = "/admin.html"
  status = 200
  
[[redirects]]
  from = "/forum"
  to = "/forum.html"
  status = 200

[[redirects]]
  from = "/chat"
  to = "/chat.html"
  status = 200

[[redirects]]
  from = "/monetization"
  to = "/monetization.html"
  status = 200

[[redirects]]
  from = "/web3"
  to = "/web3.html"
  status = 200

[[redirects]]
  from = "/leaderboard"
  to = "/leaderboard.html"
  status = 200

[[redirects]]
  from = "/tax_ledger"
  to = "/tax_ledger.html"
  status = 200

[[redirects]]
  from = "/poem_view"
  to = "/poem_view.html"
  status = 200

[[redirects]]
  from = "/search"
  to = "/search.html"
  status = 200

[[redirects]]
  from = "/*"
  to = "/404.html" # A simple 404 page is ideal here
  status = 404
